<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/Other/html.html to edit this template
-->
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Crear Reserva</title>
    </head>
    <body>
        <div th:fragment="crearReservaContent">
        <h1>Crear Reserva</h1>
        <form th:action="@{/admin/reserves/crear}" th:object="${reserva}" method="post">
            <!-- Fechas -->
            <fieldset>
                <legend>1. Selecciona les dates</legend>
                <input type="datetime-local" id="dataInici" name="dataInici" required />
                <input type="datetime-local" id="dataFin" name="dataFin" required />
                <button type="button" id="checkAvailability" disabled>Comprovar disponibilitat</button>
            </fieldset>

            <!-- Cliente -->
            <fieldset>
                <legend>2. Selecciona un client</legend>
                <select id="client" name="client.dni" required disabled>
                    <option value="" disabled selected>Selecciona un client</option>
                    <option th:each="client : ${clients}" 
                            th:value="${client.dni}" 
                            th:text="${client.nom + ' ' + client.cognoms + ' ' + client.reputacio}" 
                            th:data-reputacio="${client.reputacio}">
                    </option>
                </select>
                <input type="hidden" id="reputacio" value="NORMAL" />
            </fieldset>

            <!-- Vehículos -->
            <fieldset>
                <legend>3. Selecciona un vehicle</legend>
                <select id="vehicle" name="vehicle.matricula" required disabled>
                    <option value="" disabled selected>Selecciona un vehícle</option>
                </select>
            </fieldset>

            <!-- Detalles -->
            <fieldset id="vehicleDetails" style="display: none;">
                <legend>Detalls del vehicle seleccionat</legend>
                <table>
                    <tr><td>Preu per hora:</td><td id="vehiclePrice">--</td></tr>
                    <tr><td>Fiança estándar: </td><td id="vehicleFianca">--</td></tr>
                </table>
            </fieldset>

            <!-- Precio total -->
            <fieldset>
                <legend>Detalls del preu</legend>
                <p>Hores: <span id="totalHoras">--</span></p>
                <p>Preu total per hores: €<span id="costHoras">--</span></p>
                <p>Fiança: €<span id="fiancaCalculada">--</span></p>
                <p>Cost total de reserva: €<span id="costTotal">--</span></p>
            </fieldset>

            <button type="submit" disabled>Crear Reserva</button>
        </form>
        </div>
    </body>
</html>
